webpackJsonp([0],{"0w5B":function(e,o){},"3qOn":function(e,o){},"7eyz":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("Dd8w"),a=t.n(n),r=t("HR9g"),i=t("v8Qz"),s=t("hXMo"),c=t("9PiF"),l=t("u6vw"),u=t("57CN"),g=t("xrTZ"),d={name:"WelcomeLogon",components:{Icon:i.a,ClearAccountRecord:s.a,Navbar:c.a},inheritAttrs:!1,props:{lastLogonTypeFullInfo:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{closeIconShow:!1,closeTextShow:!1,logonInfo:{name:"",buttonName:"",logonType:"",infoCollectPage:""}}},computed:{avatarUrl:function(){return"data:image/*;base64,"+this.lastLogonTypeFullInfo.lastAvatar}},methods:{avatarMouseEnter:function(){this.closeIconShow=!0},avatarMouseLeave:function(){this.closeIconShow=!1},avatarCloseIconMouseEnter:function(){this.closeTextShow=!0},avatarCloseIconMouseLeave:function(){this.closeTextShow=!1},lastLogonInfoClear:function(){this.$emit("change-to-logon-page",r.f.WeChatDing)},loginNewpageClick:function(e){u.a.loginNewpageClick(a()({source:"welcome",page:this.logonInfo.infoCollectPage},e))},loginNewpageShow:function(e){u.a.loginNewpageShow(a()({source:"welcome"},e))},goBack:function(){this.loginNewpageClick({click:"other_login_type"}),this.$emit("change-to-logon-page",r.f.WeChatDing)},gotoLoginPage:function(){var e=this.logonInfo.logonType;this.loginNewpageClick({click:"click_login_again"}),l.a.gotoLoginPage({page:e})},switchLastLogonType:function(){var e=this.lastLogonTypeFullInfo,o=e&&e.lastLoginType,t=o&&o.toLowerCase(),n=e.lastUserName,i={name:n?g.Base64.decode(n):""};switch(t){case"huawei":this.logonInfo=a()({},i,{buttonName:"华为登录",logonType:r.p.Huawei,infoCollectPage:"huawei"});break;case"dingding":this.logonInfo=a()({},i,{buttonName:"钉钉登录",logonType:r.p.Dingding,infoCollectPage:"dingding"});break;case"qq":this.logonInfo=a()({},i,{buttonName:"QQ登录",logonType:r.p.QQ,infoCollectPage:"qq"});break;case"educloud":this.logonInfo=a()({},i,{buttonName:"教育云登录",logonType:r.p.EduCloud,infoCollectPage:"EduCloud"});break;case"weibo":this.logonInfo=a()({},i,{buttonName:"微博登录",logonType:r.p.Weibo,infoCollectPage:"weibo"});break;case"xiaomi":this.logonInfo=a()({},i,{buttonName:"小米登录",logonType:r.p.Xiaomi,infoCollectPage:"xiaomi"});break;case"schoolmail":this.logonInfo=a()({},i,{buttonName:"校园邮登录",logonType:r.p.SchoolMail,infoCollectPage:"school"});break;case"company":this.logonInfo=a()({},i,{buttonName:"企业登录",logonType:r.p.Company,infoCollectPage:"company"})}}},created:function(){this.switchLastLogonType()},mounted:function(){this.logonInfo.infoCollectPage&&this.loginNewpageShow({page:this.logonInfo.infoCollectPage})}},p={render:function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"wps-welcome"},[e._m(0),e._v(" "),n("div",{staticClass:"container"},[n("Navbar",{staticClass:"navbar",on:{back:e.goBack}},[n("template",{slot:"back"},[e._v("其他登录方式")])],2),e._v(" "),n("div",{staticClass:"wps-welcome-hd"},[n("div",{staticClass:"wps-welcome-avatar"},[n("ClearAccountRecord",{on:{"clear-account-record":e.lastLogonInfoClear}},[e.lastLogonTypeFullInfo.lastAvatar?n("img",{staticClass:"img",attrs:{src:e.avatarUrl,alt:""}}):n("img",{staticClass:"img",attrs:{src:t("MpS2"),alt:""}})])],1),e._v(" "),n("p",{staticClass:"wps-welcome-username"},[e._v(e._s(e.logonInfo.name))]),e._v(" "),n("div",{staticClass:"wps-welcome-button",on:{click:e.gotoLoginPage}},[e._v(e._s(e.logonInfo.buttonName))])])],1)])},staticRenderFns:[function(){var e=this.$createElement,o=this._self._c||e;return o("div",{staticClass:"newlogon-header"},[o("div",{staticClass:"title"},[this._v("欢迎回来")])])}]};var h=t("VU/8")(d,p,!1,function(e){t("UMi6")},"data-v-3c9f6940",null);o.default=h.exports},"9PiF":function(e,o,t){"use strict";var n={name:"LoginNavbar",props:{title:{type:String,default:""}},data:function(){return{}},methods:{onBack:function(){this.$emit("back")}}},a={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"wps-login-navbar"},[t("div",{staticClass:"wps-login-navbar__back",on:{click:e.onBack}},[e._t("back",[e._v("返回")])],2),e._v(" "),t("div",{staticClass:"wps-login-navbar__body"},[e.title?t("span",[e._v(e._s(e.title))]):e._e()])])},staticRenderFns:[]};var r=t("VU/8")(n,a,!1,function(e){t("3qOn")},"data-v-09a4967e",null);o.a=r.exports},Coe7:function(e,o){},MpS2:function(e,o){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxjaXJjbGUgY3g9IjI0IiBjeT0iMjQiIHI9IjI0IiBmaWxsPSIjRUNFREYyIi8+CiAgICA8cGF0aCBmaWxsPSIjN0Y4NUE1IiBmaWxsLW9wYWNpdHk9Ii4zIiBkPSJNMjMuNDY4NzQ5Myw5LjAxMDg2ODc4IEMyOC4yNTM3NTY4LDguODIzNzM5NDUgMzIuMjE3NTA2OCwxMS4wNzUyNDc5IDMyLjMyMTI2NDMsMTQuMDQ0NDI4MSBDMzIuMzMxNzU1LDE0LjM4Mzg3ODMgMzIuMjkyMTQ3MywxNC43MjMwMTI1IDMyLjIwMzc1MTgsMTUuMDUwNjExNyBDMzIuNzU3MTg2MywxNi4yNTE4NDkzIDMzLjAzMjExMzMsMTcuNTY1MzgzNCAzMy4wMDc1MDkzLDE4Ljg5MDc2OTUgQzMzLjAyMTYzMzIsMjAuMDcxOTI4MSAzMi44MDg5MzU4LDIxLjI0NDYwMjkgMzIuMzgxMjU0MywyMi4zNDM1MzI3IEMzMy41MjY2MjQzLDIyLjc4MzQ4NzkgMzQuMTQzNTU4NiwyNC4wNDM0NjExIDMzLjc5NjI1MTgsMjUuMjMzNDAxIEMzMy43MDA3MDIsMjYuNDc1NTMzNyAzMi42MzMwMjgsMjcuNDA2NDU4NyAzMS40MDYyNTkzLDI3LjMxNzI4MDEgTDMxLjQwNjI1OTMsMjcuMzE3MjgwMSBDMzAuNjg4OTAyMywyOS41MjI5OTUxIDI5LjM0MDkyMDgsMzEuNDY0MzMyMiAyNy41Mjg3NjY4LDMyLjg4NjM2MzMgQzI3LjI1ODM2OTcsMzMuMDkzNjk3NiAyNy4xMDcxMTE1LDMzLjQyMzQwMDEgMjcuMTI1MDA2OCwzMy43NjY0NTI3IEwyNy4xMjUwMDY4LDMzLjc2NjQ1MjcgTDI3LjE5ODc1MTgsMzUuNDMxNzM3MSBDMjcuMjEyMDQyOSwzNS45MTc0NzQzIDI3LjU2NjkzNTUsMzYuMzIzNzk3IDI4LjA0MTI1NDMsMzYuMzk2MzMyNSBDMzMuNjMxNDA4NCwzNy4xNDQ3NzU4IDM4LjA1ODk4MDUsMzkuNjk4Mjc0IDM5Ljc5NTgxMjksNDIuMDY5NTYwNCBDMzUuNjc1NDk3NSw0NS42NzQxNTY2IDMwLjMxMjEwOTYsNDcuODkyMTYzMyAyNC40MzI5NzksNDcuOTk2MTcyOCBDMjQuMjMxNDAwOSw0Ny45OTcwNjU0IDI0LjAyODMxNjcsNDcuOTk4MDY5MSAyMy44MjQzMzEzLDQ3Ljk5ODc2NzggQzE3LjM1MTk5NjUsNDcuOTUyODQ5NiAxMS40ODkyMDMxLDQ1LjM0NDcwNzUgNy4xOTkwMDIzMiw0MS4xMzg0NjA2IEM5LjI5NjI1Njg1LDM5LjA2Mzg0MDEgMTMuMjc4OTg5NSwzNy4wNDcyNzgyIDE4LjE0MTI1OTMsMzYuMzk2Mzg1NyBDMTguNjE1NTc4MSwzNi4zMjM4NTAyIDE4Ljk3MDQ3MDgsMzUuOTE3NTI3NSAxOC45ODM3NjE4LDM1LjQzMTc5MDMgTDE4Ljk4Mzc2MTgsMzUuNDMxNzkwMyBMMTkuMDU3NTA2OCwzMy43Njc4MTc3IEMxOS4wNzU5NTA2LDMzLjQyNTAyNDcgMTguOTI0NTQxOCwzMy4wOTU0NjUgMTguNjUzNzY0MywzMi44ODkwMjI0IEMxNi44NDIzODAxLDMxLjQ2Njc2NjMgMTUuNDk0NTQ2OCwyOS41MjYwODM3IDE0Ljc4NTAwNDMsMjcuMzE4NTc0MiBDMTMuNTYzMTk1OSwyNy4zOTgzMTA2IDEyLjUwNDQ1ODYsMjYuNDY5NzUgMTIuNDA3NTA2OCwyNS4yMzM0MDEgQzEyLjA1MzM2MzYsMjQuMDMwMjc0OCAxMi42OTAzNTIxLDIyLjc1Njc1MTUgMTMuODU3NTA0MywyMi4zMzQ0Mzg2IEwxMy44NTc1MDQzLDIyLjMzNDQzODYgQzEzLjI0MTQ5NjcsMjEuMDg4ODQyIDEyLjkzMzMwMzIsMTkuNzA4MDkxNyAxMi45NjM3NjE4LDE4LjMxMzU2ODcgQzEyLjk2Mzc2MTgsMTUuNDg0ODA2NCAxNC4wNjEyNTY4LDEzLjE1NjUzODggMTUuNDc4NzU2OCwxMi44MTIwNDQyIEMxNi42NDEyNjQzLDEwLjcyOTQ1OTIgMTkuNzU2MjY0Myw5LjE1NjQ4MDc5IDIzLjQ2ODc0OTMsOS4wMTA4Njg3OCBaIi8+CiAgPC9nPgo8L3N2Zz4K"},"T+df":function(e,o){},UMi6:function(e,o){},hXMo:function(e,o,t){"use strict";var n=t("57CN"),a=t("u6vw"),r={name:"ClearAccountRecord",data:function(){return{}},methods:{onShowClear:function(){n.a.loginpageApprecordShow("cleardata")},onClear:function(){a.a.clearAccountRecord(),this.$emit("clear-account-record"),n.a.loginpageApprecordClick({click:"cleardata"})}}},i={render:function(){var e=this.$createElement,o=this._self._c||e;return o("div",{staticClass:"clear-account-record"},[this._t("default"),this._v(" "),o("div",{staticClass:"clear-account-record-close",on:{mouseenter:this.onShowClear}},[o("i",{staticClass:"clear-account-record-close-icon",on:{click:this.onClear}}),this._v(" "),o("i",{staticClass:"clear-account-record-close-txt"},[this._v("清除账号记录")])])],2)},staticRenderFns:[]};var s=t("VU/8")(r,i,!1,function(e){t("Coe7")},"data-v-743b3f36",null);o.a=s.exports},lhYX:function(e,o){},mmpj:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("bOdI"),a=t.n(n),r=t("Dd8w"),i=t.n(r),s=t("HR9g"),c=t("NYxO"),l=t("v8Qz"),u=t("9PiF"),g=t("0EwI"),d=t("ndG0"),p=t("u6vw"),h=t("57CN"),f={name:"SecondLogon",components:{Icon:l.a,Navbar:u.a,Loading:g.a,NetworkError:d.a},props:{isEdition:{type:Boolean,default:function(){return!1}}},data:function(){return{showHuaweiLogon:!1,LOGON_TYPE:s.p,curLoginType:"",isSecondLoading:!1,hasNetWorkError:!1,networkErrorCode:""}},computed:i()({},Object(c.d)({loginSource:function(e){return e.loginSource},isEdition:function(e){return e.isEdition}}),{loginTitle:function(){return"2020updated_member"===this.loginSource?s.w.special2020:s.w.default},list:function(){var e=this.isEdition,o=[{name:"账号密码",icon:"wpsaccount-logon",loginType:s.p.WpsAccount},{name:"QQ账号",icon:"qq-logon",loginType:s.p.QQ},{name:"钉钉账号",icon:"dingding-logon",loginType:s.p.Dingding},{name:"华为账号",icon:"huawei-logon",loginType:s.p.Huawei},{name:"第三方企业码",icon:"third-party-logon",loginType:s.p.Company},{name:"教育云账号",icon:"edu-cloud-logon",loginType:s.p.EduCloud},{name:"微博账号",icon:"weibo-logon",loginType:s.p.Weibo},{name:"小米账号",icon:"mi-logon",loginType:s.p.Xiaomi}],t=[{name:"QQ账号",icon:"qq-logon",loginType:s.p.QQ},{name:"钉钉账号",icon:"dingding-logon",loginType:s.p.Dingding},{name:"企业登录",icon:"third-party-logon",loginType:s.p.Company},{name:"微博账号",icon:"weibo-logon",loginType:s.p.Weibo},{name:"小米账号",icon:"mi-logon",loginType:s.p.Xiaomi}];return e?o:t}}),created:function(){var e=this;p.a.supportHuaweiLogin().then(function(o){o.isSupportHuaweiLogin?e.showHuaweiLogon=!0:e.showHuaweiLogon=!1})},mounted:function(){},unmounted:function(){this.removeEvent()},methods:{loginNewpageClick:function(e){h.a.loginNewpageClick(i()({source:"second_page"},e))},goBack:function(){this.isSecondLoading=!1,this.hasNetWorkError=!1,this.curLoginType="",this.networkErrorCode="",this.loginNewpageClick({page:"",click:"return"}),this.$emit("change-to-logon-page",s.f.WeChatDing)},onLoginWaysClick:function(e){var o,t=(o={},a()(o,s.p.WpsAccount,"mail"),a()(o,s.p.QQ,"qq"),a()(o,s.p.Dingding,"dingding"),a()(o,s.p.Huawei,"huawei"),a()(o,s.p.Company,"company"),a()(o,s.p.EduCloud,"EduCloud"),a()(o,s.p.Weibo,"weibo"),a()(o,s.p.Xiaomi,"xiaomi"),o);switch(this.loginNewpageClick({page:"",click:t[e]}),e){case s.p.WpsAccount:this.$emit("change-to-logon-page",s.f.WpsAccount);break;case s.p.QQ:case s.p.Dingding:case s.p.Huawei:case s.p.Company:case s.p.EduCloud:case s.p.Weibo:case s.p.Xiaomi:this.beginLoadPage(e)}},beginLoadPage:function(e){this.curLoginType=e,p.a.gotoLoginPage({page:e})},endLoadPage:function(e){this.isSecondLoading=!1,this.hasNetWorkError=!e},onReload:function(){this.beginLoadPage(this.curLoginType)},setLoadingTimeout:function(){var e=this;setTimeout(function(){e.isSecondLoading&&(e.hasNetWorkError=!0,e.isSecondLoading=!1,e.networkErrorCode="")},s.x)},bindEvent:function(){var e=this;this.removeEvent(),p.a.listenPageStatusEvent(function(o){if(o&&"ok"===o.callstatus){var t=o.result,n=(t=void 0===t?{}:t).page,a=t.status,r=t.code;if(n===e.curLoginType){var i=!0;"ok"===a?i=!0:(i=!1,e.networkErrorCode=r),e.endLoadPage(i)}}})},removeEvent:function(){p.a.removePageStatusEvent()}}},m={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"second"},[t("div",{staticClass:"newlogon-header"},[t("div",{staticClass:"title"},[e._v(e._s(e.loginTitle))])]),e._v(" "),t("div",{staticClass:"container"},[t("Navbar",{staticClass:"navbar",attrs:{title:""},on:{back:e.goBack}},[t("template",{slot:"back"},[e._v("返回")])],2),e._v(" "),e.hasNetWorkError?t("NetworkError",{staticClass:"network-error",attrs:{page:"secondlogin",code:e.networkErrorCode},on:{refresh:e.onReload}}):e.isSecondLoading?t("Loading",{staticClass:"second-loading"}):t("div",[t("div",{staticClass:"icon-body"},[e._l(e.list,function(o){return[o.loginType!==e.LOGON_TYPE.Huawei||o.loginType===e.LOGON_TYPE.Huawei&&e.showHuaweiLogon?t("div",{key:o.loginType,staticClass:"logon-btn"},[t("div",{staticClass:"logon-btn-wrap",on:{click:function(t){return e.onLoginWaysClick(o.loginType)}}},[t("Icon",{staticClass:"logon-btn-icon",attrs:{type:o.icon}}),e._v(" "),t("span",{staticClass:"logon-btn-txt"},[e._v(e._s(o.name))])],1)]):e._e()]})],2),e._v(" "),t("div",{staticClass:"bottom-tips"},[e._v("灰色标识的登录方式近期将停止使用，请在登录后尽快绑定手机")])])],1)])},staticRenderFns:[]};var w=t("VU/8")(f,m,!1,function(e){t("xsxB")},"data-v-9ccf546c",null);o.default=w.exports},na8r:function(e,o){},pN3x:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("Xxa5"),a=t.n(n),r=t("exGp"),i=t.n(r),s=t("Dd8w"),c=t.n(s),l=t("bOdI"),u=t.n(l),g=t("NYxO"),d=t("u6vw"),p=t("RZOd"),h=t("57CN"),f=t("Gd+5"),m=t("v8Qz"),w=t("zzg3"),v=t("8Qhn"),C=t("0EwI"),L=t("ndG0"),M=t("RTK1"),N=t("UXP8"),T=t("hXMo"),k={name:"WpsAvatar",components:{ClearAccountRecord:T.a},props:{src:{type:String,default:""},name:{type:String,default:""}},data:function(){return{}},methods:{onClearAccountRecord:function(e){this.$emit("clear-account-record",e)}}},b={render:function(){var e=this.$createElement,o=this._self._c||e;return o("div",{staticClass:"wps-avatar"},[o("div",{staticClass:"wps-avatar__img"},[o("ClearAccountRecord",{on:{"clear-account-record":this.onClearAccountRecord}},[o("img",{attrs:{src:this.src,alt:""}})])],1),this._v(" "),o("div",{staticClass:"wps-avatar__nickname"},[this._v(this._s(this.name))])])},staticRenderFns:[]};var I=t("VU/8")(k,b,!1,function(e){t("zETU")},null,null).exports,A=t("xrTZ"),y={name:"MobileAuth",components:{Icon:m.a,Button:N.a,Avatar:I},data:function(){return{userName:"",userAvatar:"",requestedLogon:!1,isActive:!0}},props:{lastLogonTypeFullInfo:{type:Object,required:!0,default:function(){return{lastAvatar:"",lastAvatarSuffix:"png",lastLoginType:"QRcode",lastUserName:""}}}},watch:{lastLogonTypeFullInfo:{immediate:!0,handler:function(e){this.userName=d.a.base64Decode(e.lastUserName),this.userAvatar="data:image/"+e.lastAvatarSuffix+";base64,"+e.lastAvatar}}},methods:{onLogon:function(){var e=this;return i()(a.a.mark(function o(){var t,n,r;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.lastLogonTypeFullInfo.pc_devid,n=e.lastLogonTypeFullInfo.pc_devname,o.next=4,p.a.createMobileAuthChannelId({userid:e.lastLogonTypeFullInfo.userid,pc_devid:A.Base64.decode(t),pc_devname:A.Base64.decode(n)});case 4:if("ok"!==(r=o.sent).result){o.next=12;break}return o.next=8,p.a.pushCannelIdToMobileApp({userid:e.lastLogonTypeFullInfo.userid,channel_id:r.channel_id});case 8:"ok"===o.sent.result?(e.requestedLogon=!0,e.waitAuthResult(r.channel_id)):(e.$emit("mobileAuthNetworkError"),e.loginFailCollect()),o.next=14;break;case 12:e.$emit("mobileAuthNetworkError"),e.loginFailCollect();case 14:case"end":return o.stop()}},o,e)}))()},waitAuthResult:function(e){var o=this;return i()(a.a.mark(function t(){var n,r,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.waitMobileAppAuthResult(e);case 2:"ok"===(n=t.sent).result&&o.isActive?"notified"===n.state?(r=JSON.parse(d.a.base64Decode(n.data)),"string"==typeof(i=r.trusted)&&(i="true"===i),d.a.verifyCallback({ssid:r.ssid,trusted:i,deviceplatform:r.deviceplatform,deviceType:r.deviceType}),h.a.loginpageApprecordClick({click:"login_click",result:"success",from:r.deviceplatform})):"pending"===n.state?o.waitAuthResult(e):"QRCodeExpired"===n.result&&(o.$emit("mobileAppAuthExpired"),o.loginFailCollect()):"QRCodeExpired"===n.result?(o.$emit("mobileAppAuthExpired"),o.loginFailCollect()):(o.$emit("mobileAuthNetworkError"),o.loginFailCollect());case 4:case"end":return t.stop()}},t,o)}))()},onRetryQrcode:function(){this.isActive=!1,this.$emit("mobileAppAuthRetryQrcode"),h.a.loginpageApprecordClick({click:"scan_again"})},onSwitchAccount:function(){this.isActive=!1,this.$emit("mobileAppAuthRetryQrcode"),h.a.loginpageApprecordClick({click:"switch_account"})},onClear:function(){this.$emit("mobileAppAuthClear")},loginFailCollect:function(){h.a.loginpageApprecordClick({click:"login_click",result:"fail"})}},mounted:function(){h.a.loginpageApprecordShow()}},_={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"mobile-auth",on:{dragstart:function(e){e.preventDefault()}}},[t("Avatar",{staticClass:"mobile-auth-avatar",attrs:{src:e.userAvatar,name:e.userName},on:{"clear-account-record":e.onClear}}),e._v(" "),t("div",{staticClass:"mobile-auth-logon"},[e.requestedLogon?t("div",{staticClass:"mobile-auth-logon-txt"},[e._v("请在手机WPS上点击确认登录")]):t("Button",{staticClass:"mobile-auth__btn",attrs:{type:"primary-big"},on:{click:e.onLogon}},[e._v("登录")])],1),e._v(" "),e.requestedLogon?t("div",{staticClass:"mobile-auth-refresh"},[t("span",{staticClass:"mobile-auth-refresh-txt"},[e._v("\n      收不到消息？点击\n    ")]),e._v(" "),t("a",{staticClass:"mobile-auth-refresh-link",attrs:{href:"javascript:;"},on:{click:e.onRetryQrcode}},[e._v("扫码登录")])]):t("div",{staticClass:"mobile-auth-switch",on:{click:e.onSwitchAccount}},[t("span",{staticClass:"mobile-auth-switch-txt"},[e._v("\n      切换账号\n    ")])])],1)},staticRenderFns:[]};var x=t("VU/8")(y,_,!1,function(e){t("na8r")},"data-v-3fa3772f",null).exports,W=t("//Fk"),E=t.n(W),D=t("7OS/"),U=t("oFuF"),O={name:"LoginBanner",props:{src:{type:String,default:""},isEdition:{type:Boolean,default:!1}},data:function(e){return{isLoaded:!0,curUrl:e.src,isError:!1,isWin:U.e.isWin,isNix:U.e.isNix,isEdu:!1}},computed:{imgStyle:function(){var e=this.curUrl;return this.isError||!e?{}:{backgroundImage:"url("+e+")"}}},mounted:function(){this.init()},methods:{init:function(){var e=this;return i()(a.a.mark(function o(){var t,n;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e.curUrl){o.next=7;break}return D.b.$emit(D.a.LOAD_PRODUCT_PIC_EVENT,!1),o.next=4,d.a.getProductSupport({key:"EducationVersion"});case 4:t=o.sent;try{(n=JSON.parse(t)).value&&"true"===n.value&&(e.isEdu=!0)}catch(e){console.error(e)}return o.abrupt("return");case 7:return o.prev=7,o.next=10,e.loadImg(e.curUrl);case 10:D.b.$emit(D.a.LOAD_PRODUCT_PIC_EVENT,!0),o.next=19;break;case 13:o.prev=13,o.t0=o.catch(7),e.isError=!0,e.curUrl="",e.$emit("load-error",o.t0),D.b.$emit(D.a.LOAD_PRODUCT_PIC_EVENT,!1);case 19:case"end":return o.stop()}},o,e,[[7,13]])}))()},loadImg:function(e){return new E.a(function(o,t){if(!e||"string"!=typeof e)return t("无效url");var n=new Image,a=(new Date).getTime();n.onload=function(){h.a.webinitImgload({result:"success",data:e,time:(new Date).getTime()-a}),o(n)},n.onerror=function(o){h.a.webinitImgload({result:"fail",data:e,time:(new Date).getTime()-a}),t(o)},n.src=e})}}},j={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"wps-banner"},[e.isWin&&!e.isEdition||e.isNix&&!e.isEdition?t("div",{class:{img:!0,pro2:!0},style:e.imgStyle,on:{dragstart:function(e){e.preventDefault()}}}):t("div",{class:{img:!0,pro:!e.isEdition,edu:e.isEdu&&e.isEdition},style:e.imgStyle,on:{dragstart:function(e){e.preventDefault()}}})])},staticRenderFns:[]};var R=t("VU/8")(O,j,!1,function(e){t("T+df")},"data-v-20e38288",null).exports,z=t("HR9g"),S=t("162o"),Q=t("ukYY"),P=t("faTe"),B={name:"WeChatDingLogon",components:{Icon:m.a,ImageButton:w.a,Checkbox:v.a,Loading:C.a,NetworkError:L.a,LogonTip:M.a,MobileAuth:x,ClearAccountRecord:T.a,Banner:R,Avatar:I,Button:N.a},props:{load:{type:Array,default:function(){return[!1,!1]}},currentPage:{type:String,default:""},lastLogonType:{type:String,default:function(){return""}},lastLogonTypeFullInfo:{type:Object,required:!0,default:function(){return{}}},loginConfig:{type:Object,default:function(){return{}}}},filters:{filterClass:function(e){var o;return(o={},u()(o,z.v.WX,"tab-box-wx"),u()(o,z.v.PhoneCode,"tab-box-phone"),u()(o,z.v.WpsMobileQr,"tab-box-wpsqr"),u()(o,z.v.WpsAccount,"tab-box-wpsac"),o)[e]},filterIconType:function(e){var o;return(o={},u()(o,z.v.WX,"wx-tiny"),u()(o,z.v.PhoneCode,"phone-tiny"),u()(o,z.v.WpsMobileQr,"wpsqr-tiny"),u()(o,z.v.WpsAccount,"wpsaccount-tiny"),o)[e]},filterIconClass:function(e){var o;return(o={},u()(o,z.v.WX,"wx-tiny-icon"),u()(o,z.v.PhoneCode,"phone-tiny-icon"),u()(o,z.v.WpsMobileQr,"wps-tiny-icon"),u()(o,z.v.WpsAccount,"wpsaccount-tiny-icon"),o)[e]}},data:function(){var e=P.a.firstTab.key,o=P.a.firstTab.loginType,t=P.a.firstTab.key,n=P.a.firstTab.loginType;return{accountLogonUrl:"",isWpsMobileAuthActive:!1,currentTab:e,curLogonType:o,wxLogonUrl:"",wxLogonFullUrl:"",wpsMobileQrUrl:"",phoneCodeLogonUrl:"",isAccoungtIframeLoaded:!1,isWxIframeLoaded:!1,isWpsQrIframeLoaded:!1,isPhoneCodeIframeLoaded:!1,hasNetWorkErrorWpsAc:!1,hasNetWorkErrorWX:!1,hasNetWorkErrorWpsQr:!1,hasNetWorkErrorMobileAuth:!1,hasNetWorkErrorPhone:!1,networkErrorTimes:{wx:0,wpsQr:0,phoneCode:0,wpsAc:0},appInfoURI:"",weChatThirdLogonButton:!1,showWeChatButton:!1,netWorkStatusConfig:!1,lastLogonInfo:null,showLastLogonInfo:!1,showReadModeButton:!1,TAB:z.v,isAgreementChecked:!1,defaultTab:t,defaultLogonType:n,iframeLoadTimeMap:{}}},computed:c()({},Object(g.d)({logonType:function(e){return e.curLogonType},wxAutoLogon:function(e){return e.autoLogon.wechat},dingAutoLogon:function(e){return e.autoLogon.dingding},loginSource:function(e){return e.loginSource},loginPosition:function(e){return e.loginPosition},agreementInfo:function(e){return e.AGREEMENT_CONFIG},hasAgreementControl:function(e){return e.AGREEMENT_CONFIG&&e.AGREEMENT_CONFIG.is_enable_advance_agreement},isEdition:function(e){return e.isEdition}}),{loginTitle:function(){return"2020updated_member"===this.loginSource?z.w.special2020:this.currentTab===z.v.WpsMobileQr&&this.isWpsMobileAuthActive||this.currentTab===z.v.WX&&this.showLastLogonInfo?z.w.welcome:z.w.default},showAgreementMark:function(){var e=!1,o=this.isAgreementChecked,t=this.hasAgreementControl,n=this.currentTab,a=this.hasNetWorkErrorPhone,r=this.isPhoneCodeIframeLoaded,i=this.isWpsQrIframeLoaded,s=this.hasNetWorkErrorWpsQr,c=this.isWpsMobileAuthActive,l=this.isWxIframeLoaded,u=this.hasNetWorkErrorWX,g=this.showLastLogonInfo;return e=!!t&&!o,n!==z.v.PhoneCode||r&&!a||(e=!1),n!==z.v.WpsMobileQr||c||i&&!s||(e=!1),n!==z.v.WX||g||l&&!u||(e=!1),e},showLogonTip:function(){var e=this.isAgreementChecked,o=this.currentTab,t=this.defaultTab;return!this.hasAgreementControl||(!e||o===t)},computedTabs:function(){var e=this.isEdition,o=this.loginConfig;return e?o.tabsConf:o.tabsConfForEduc}},Object(g.b)(["WPS_MOBILE_QR_LOGON_URL","WX_LOGON_URL","WX_LOGON_URL_MINIPROGRAMCODE","ACCOUNT_LOGON_URL"]),{wxLoginCodeShow:function(){return this.isWxIframeLoaded&&!this.hasNetWorkErrorWX&&this.currentTab===z.v.WX&&!this.showLastLogonInfo}}),watch:{load:function(e){this.isWxIframeLoaded=e[0],this.isPhoneCodeIframeLoaded=e[1],this.isWpsQrIframeLoaded=e[2]},isWxIframeLoaded:function(e){var o=this;e&&this.wxLoginCodeShow&&Object(S.setTimeout)(function(){o.wxCodeShowReport(z.A.lastLogin)},2e3)},lastLogonTypeFullInfo:{immediate:!0,deep:!0,handler:function(e){e.lastLoginType===z.p.QRcode&&e.isSupportLastLoginStatus&&(this.isWpsMobileAuthActive=!0)}},logonType:{immediate:!0,handler:function(e){if(this.currentPage===z.f.WeChatDing)switch(e){case z.p.PhoneCode:this.currentTab=z.v.PhoneCode;break;case z.p.WeChat:this.currentTab=z.v.WX;break;case z.p.QRcode:this.currentTab=z.v.WpsMobileQr;break;case z.p.WpsAccount:this.currentTab=z.v.WpsAccount}}},WPS_MOBILE_QR_LOGON_URL:{handler:function(e){var o=encodeURIComponent(window.location.href.replace(/^file:\/\//,""));this.wpsMobileQrUrl=e+"&_t="+(new Date).getTime()+"&targetorigin="+o},immediate:!0},agreementInfo:{immediate:!0,deep:!0,handler:function(e){this.isAgreementChecked=!!e&&!!e.is_accepted}},isEdition:{immediate:!0,handler:function(e){e?this.defaultTab=P.a.firstTab.key:(this.currentTab=z.v.WpsAccount,this.curLogonType=z.p.WpsAccount,this.defaultTab=z.v.WpsAccount,this.getaccountLogonUrl())}},currentPage:function(e,o){o&&e===z.f.WeChatDing&&this.wxLoginCodeShow&&this.wxCodeShowReport(z.A.return)},isWpsMobileAuthActive:function(e){e||(this.wpsQrIframeStartLoadTime=(new Date).getTime())}},created:function(){var e=this;return i()(a.a.mark(function o(){return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e.isWxIframeLoaded=e.load[0],e.isPhoneCodeIframeLoaded=e.load[1],e.isWpsQrIframeLoaded=e.load[2],e.judgeWeChatThirdLogonButtonConfig(),e.getPhoneCodeLogonUrl();case 5:case"end":return o.stop()}},o,e)}))()},mounted:function(){var e=this;this.initial(),this.mountedTime=(new Date).getTime(),this.lastLogonType,D.b.$on(D.a.LOAD_LOGON_IFRAME_TIME,function(o,t){e.handleIframeLoad(o,t)})},beforeDestroy:function(){D.b.$off(D.a.LOAD_LOGON_IFRAME_TIME)},methods:c()({},Object(g.c)({updateAgreementConfig:Q.a.UPDATE_AGREEMENT_CONFIG}),{handleIframeLoadFailReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wx";"wx"===e&&(this.isWxIframeLoaded||h.a.webinitIframeload({type:e,result:"fail",error_reason:"load_error"})),"phonecode"===e&&!this.isPhoneCodeIframeLoaded&&this.wxLogonFullUrl&&h.a.webinitIframeload({type:e,result:"fail",error_reason:"load_error"}),"wps"===e&&(this.isWpsQrIframeLoaded||h.a.webinitIframeload({type:e,result:"fail",error_reason:"load_error"}))},handleIframeLoad:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WeChatDing",t=arguments[1];this.$nextTick(function(){if(!e.iframeLoadTimeMap[o]){var n={WeChatDing:e.wxIframeStartLoadTime||e.mountedTime,PhoneCode:e.mountedTime,QRcode:e.wpsQrIframeStartLoadTime||e.mountedTime,WpsAccount:e.mountedTime};e.iframeLoadTimeMap[o]=t,h.a.webinitIframeload({type:{WeChatDing:"wx",PhoneCode:"phonecode",QRcode:"wps",WpsAccount:"account"}[o],result:"success",time:t-n[o]})}})},loginNewpageClick:function(e){h.a.loginNewpageClick(c()({source:"first_page"},e))},loginNewpageShow:function(e){h.a.loginNewpageShow(c()({source:"first_page"},e))},judgeWeChatThirdLogonButtonConfig:function(){this.lastLogonTypeFullInfo.isSupportWechatOfficalQr?(this.weChatThirdLogonButton=!0,this.getWxLogonUrlWhenButtonOpen()):(this.weChatThirdLogonButton=!1,this.netWorkStatusConfig=!0,this.getWxLogonUrl())},getWechatMiniparogramPcSwitch:function(){var e=this;return i()(a.a.mark(function o(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getWechatMiniparogramPcSwitch();case 2:return t=e.sent,e.abrupt("return",t.status);case 5:case"end":return e.stop()}},o,e)}))()},onWechatOfficialLogon:function(){this.loginNewpageClick({page:"",click:"wechat"}),h.a.loginWechaButtonClick({click:"wechatbutton"}),d.a.gotoLoginPage({page:z.p.WechatOfficial})},goToOtherLogonPage:function(){var e=this,o=this.isAgreementChecked;if(!!this.hasAgreementControl&&!o)this.showAgreementDialog("othersAuthor");else{this.loginNewpageClick({page:"",click:"other_login_type"}),h.a.loginNewpageShow({source:"second_page"});var t="";t=this.isEdition?this.loginConfig.tabsConf.find(function(o){var t=o.key;return e.currentTab===t}):this.loginConfig.tabsConfForEduc.find(function(o){var t=o.key;return e.currentTab===t}),this.$emit("notify-activity-type",t.loginType),this.$emit("change-to-logon-page",z.f.Second)}},initial:function(){this.setNetworkTimeout(),this.getLastLogonUserInfo()},getLastLogonUserInfo:function(){try{var e=this.lastLogonTypeFullInfo,o=e.lastLoginType,t=e.lastUserName,n=e.lastAvatar,a=e.lastPhoneCode;o&&o.toLowerCase()===z.p.WeChat.toLowerCase()&&(this.lastLogonInfo={lastLoginType:o,lastUserName:t?A.Base64.decode(t):"",lastPhoneCode:a,lastAvatar:"data:image/*;base64,"+n},t&&n&&(this.showLastLogonInfo=!0))}catch(e){this.showLastLogonInfo=!1}},getaccountLogonUrl:function(){var e=this;return i()(a.a.mark(function o(){var t,n,r,i,s,c,l,u,g,p;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.getAppInfo();case 2:t=o.sent,n=JSON.parse(t)||{},r=n.result,i=(new Date).getTime(),s=encodeURIComponent(r.version||""),c=encodeURIComponent(r.deviceid||""),l=encodeURIComponent(r.devicename||""),u=encodeURIComponent(r.platform||""),g=encodeURIComponent(e.lastLogonTypeFullInfo.lastAccountName&&A.Base64.decode(e.lastLogonTypeFullInfo.lastAccountName)||""),e.appInfoURI="&appversion="+s+"&deviceid="+c+"&devicename="+l+"&platform="+u,p=encodeURIComponent(window.location.href.replace(/^file:\/\//,"")),e.accountLogonUrl=""+e.ACCOUNT_LOGON_URL+e.appInfoURI+"&_="+i+"&account="+g+"&targetorigin="+p,e.isAccoungtIframeLoaded=!0;case 15:case"end":return o.stop()}},o,e)}))()},getPhoneCodeLogonUrl:function(){var e=this;return i()(a.a.mark(function o(){var t,n,r,i,s,c,l,u,g,p,h,f,m;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.getAppInfo();case 2:return t=o.sent,o.next=5,d.a.getLastLoginType();case 5:n=o.sent,r=JSON.parse(t)||{},i=r.result,s=(new Date).getTime(),c=encodeURIComponent(i.version||""),l=encodeURIComponent(i.deviceid||""),u=encodeURIComponent(i.devicename||""),g=encodeURIComponent(i.platform||""),e.appInfoURI="&appversion="+c+"&deviceid="+l+"&devicename="+u+"&platform="+g,p=encodeURIComponent(window.location.href.replace(/^file:\/\//,"")),e.phoneCodeLogonUrl=""+z.s+e.appInfoURI+"&_="+s+"&targetorigin="+p;try{h=JSON.parse(n).result,f=h.lastPhoneCode,m=h.isShowReadModeButton,e.showReadModeButton=m,f&&String(f).trim()}catch(e){}case 17:case"end":return o.stop()}},o,e)}))()},getWxLogonUrlByLocal:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i()(a.a.mark(function t(){var n,r,i,s,c,l,u,g,p,f;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.getAppInfo();case 2:n=t.sent,r=JSON.parse(n)||{},i=r.result,s=(new Date).getTime(),c=encodeURIComponent(i.version||""),l=encodeURIComponent(i.deviceid||""),u=encodeURIComponent(i.devicename||""),g=encodeURIComponent(i.platform||""),e.appInfoURI="&appversion="+c+"&deviceid="+l+"&devicename="+u+"&platform="+g,p=o?e.WX_LOGON_URL_MINIPROGRAMCODE:e.WX_LOGON_URL,f=encodeURIComponent(window.location.href.replace(/^file:\/\//,"")),e.wxLogonUrl=""+p+e.appInfoURI+"&targetorigin="+f,e.wxLogonFullUrl=e.wxLogonUrl+"&_t="+s,h.a.getiframeurl({time:(new Date).getTime()-e.getWxUrlStartTime,type:"default"});case 16:case"end":return t.stop()}},t,e)}))()},getWxLogonUrl:function(){var e=this;return i()(a.a.mark(function o(){var t,n,r,i,s;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e.getWxUrlStartTime=(new Date).getTime(),o.next=3,d.a.getWeChatQrcodeURL();case 3:if(t=o.sent,"ok"!==(n=JSON.parse(t)||{}).callstatus){o.next=21;break}if(r=n.result||{},e.wxLogonUrl=r.qrcode_url||"",e.wxLogonUrl){o.next=14;break}return o.next=12,e.getWxLogonUrlByLocal();case 12:o.next=19;break;case 14:i=(new Date).getTime(),s=encodeURIComponent(window.location.href.replace(/^file:\/\//,"")),e.wxLogonUrl=e.wxLogonUrl+"&targetorigin="+s,e.wxLogonFullUrl=e.wxLogonUrl+"&_t="+i+"&isclientiframe=true",h.a.getiframeurl({time:(new Date).getTime()-e.getWxUrlStartTime,type:"new"});case 19:o.next=23;break;case 21:return o.next=23,e.getWxLogonUrlByLocal();case 23:case"end":return o.stop()}},o,e)}))()},getWxLogonUrlWhenButtonOpen:function(){var e=this;return i()(a.a.mark(function o(){var t,n,r,i,s,c;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.getWechatMiniparogramPcSwitch();case 2:if(t=o.sent,e.netWorkStatusConfig=!0,t){o.next=10;break}return e.showWeChatButton=!0,h.a.loginWechatTypeShow({page:"wechatbutton"}),o.abrupt("return");case 10:h.a.loginWechatTypeShow({page:"programecode"});case 11:return o.next=13,d.a.getWeChatQrcodeURL();case 13:if(n=o.sent,"ok"!==(r=JSON.parse(n)||{}).callstatus){o.next=30;break}if(i=r.result||{},e.wxLogonUrl=i.qrcode_url||"",e.wxLogonUrl){o.next=24;break}return o.next=22,e.getWxLogonUrlByLocal(t);case 22:o.next=28;break;case 24:s=(new Date).getTime(),c=encodeURIComponent(window.location.href.replace(/^file:\/\//,"")),e.wxLogonUrl=e.wxLogonUrl+"&targetorigin="+c,e.wxLogonFullUrl=e.wxLogonUrl+"&_t="+s+"&isclientiframe=true";case 28:o.next=32;break;case 30:return o.next=32,e.getWxLogonUrlByLocal(t);case 32:case"end":return o.stop()}},o,e)}))()},setNetworkTimeout:function(){var e=this;Object(S.setTimeout)(function(){e.isWxIframeLoaded||(e.isWxIframeLoaded=!1,e.hasNetWorkErrorWX=!0,e.networkErrorTimes.wx+=1,h.a.webinitIframeload({result:"fail",error_reason:"overtime",type:"wx"})),e.isWpsQrIframeLoaded||e.isWpsMobileAuthActive||(e.hasNetWorkErrorWpsQr=!0,e.isWpsQrIframeLoaded=!1,e.networkErrorTimes.wpsQr+=1,h.a.webinitIframeload({result:"fail",error_reason:"overtime",type:"wps"})),e.isPhoneCodeIframeLoaded||(e.hasNetWorkErrorPhone=!0,e.isPhoneCodeIframeLoaded=!1,e.networkErrorTimes.phoneCode+=1,h.a.webinitIframeload({result:"fail",error_reason:"overtime",type:"phonecode"})),e.isAccoungtIframeLoaded||(e.hasNetWorkErrorWpsAc=!0,e.isAccoungtIframeLoaded=!1,e.networkErrorTimes.wpsAc+=1)},z.x)},onRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=(new Date).getTime(),t=encodeURIComponent(window.location.href.replace(/^file:\/\//,""));e===z.v.WX&&(this.wxLogonFullUrl=this.wxLogonUrl+"&_t="+o,this.hasNetWorkErrorWX=!1),e===z.v.WpsMobileQr&&(this.wpsMobileQrUrl=this.wpsMobileQrUrl+"&_t="+o+"&targetorigin="+t,this.hasNetWorkErrorWpsQr=!1),e===z.v.PhoneCode&&(this.phoneCodeLogonUrl=""+z.s+this.appInfoURI+"&_="+o+"&targetorigin="+t,this.hasNetWorkErrorPhone=!1),"wpsAccount"===e&&(this.accountLogonUrl=this.accountLogonUrl+"&-t"+o+"&targetorigin="+t,this.hasNetWorkErrorWpsAc=!1),this.hasNetWorkErrorMobileAuth=!1,this.setNetworkTimeout()},onChangeLogonAuto:function(e){d.a.notifyAutoLogin({type:z.p.WeChat,autologin:e})},onMobileAppAuthRetryQrcode:function(){this.onRefresh(),this.isWpsMobileAuthActive=!1},onMobileAppAuthExpired:function(){this.onRefresh(),this.isWpsMobileAuthActive=!1},onMobileAppAuthClear:function(){this.isWpsMobileAuthActive=!1,this.currentTab=this.defaultTab,this.curLogonType=this.defaultLogonType},onClearWXRecord:function(){this.isWpsMobileAuthActive=!1,this.currentTab=this.defaultTab,this.curLogonType=this.defaultLogonType,this.onShowWxLogin()},onMobileAuthNetworkError:function(){this.hasNetWorkErrorMobileAuth=!0},onMobileAuthRefresh:function(){this.onRefresh()},clickCheckWeChatDataSend:function(e){this.loginNewpageClick({page:"wechat",click:e?"click_autologin_selected":"click_autologin_unselected"})},clickCheckDingDataSend:function(e){this.loginNewpageClick({page:"dingding",click:e?"click_autologin_selected":"click_autologin_unselected"})},onShowWxLogin:function(){this.showLastLogonInfo=!1,this.wxIframeStartLoadTime=(new Date).getTime(),this.onRefresh(z.v.WX)},handleReadModeButton:function(){try{d.a.enterReadMode({agreementPage:!1})}catch(e){}},renderReadonlyClass:function(e){return this.showReadModeButton?{"login-other":"wps-logon-wxding-other-margin","login-tip":"wps-logon-wxding-logontip-margin"}[e]:""},onChooseTab:function(e){var o=this;return i()(a.a.mark(function t(){var n,r,i,s,c,l,u,g,p,f,m;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.currentTarget.dataset.type,r=o.isAgreementChecked,i=o.currentTab,s=o.hasAgreementControl,c=!1,s?r||n===i||(c=!0):c=!1,!c){t.next=7;break}return o.showAgreementDialog(n),t.abrupt("return");case 7:t.t0=n,t.next=t.t0===z.v.WX?10:t.t0===z.v.PhoneCode?36:t.t0===z.v.WpsMobileQr?42:t.t0===z.v.WpsAccount?48:54;break;case 10:return o.currentTab=z.v.WX,o.curLogonType=z.p.WeChat,l="",u="",g="",t.prev=15,t.next=18,d.a.getQRConfig();case 18:p=t.sent,f=JSON.parse(p),m=f.result,"[object Object]"===Object.prototype.toString.call(m)&&(l=m.config,u=m.qrcode===z.o.DOCER?"docer":m.qrcode===z.o.VIP?"vip":"public",g=m.login_position),t.next=30;break;case 24:t.prev=24,t.t1=t.catch(15),console.error(t.t1),l="acquirefail",u="acquirefail",g="acquirefail";case 30:return o.loginNewpageClick({page:"wechat",click:"wechat_tab",scan_type:l,qr_from:u,login_position:g}),o.loginNewpageShow({page:"wechat",scan_type:l,qr_from:u,login_position:g}),o.showLastLogonInfo||!o.isWxIframeLoaded||o.hasNetWorkErrorWX||h.a.loginCodeShow({page:"wechat",scan_type:l,qr_from:u,login_position:g,show_from:z.A.switch}),o.$emit("show-logon-page",z.p.WeChat),t.abrupt("break",55);case 36:return o.currentTab=z.v.PhoneCode,o.curLogonType=z.p.PhoneCode,o.loginNewpageClick({page:"phone",click:"phone_tab"}),o.loginNewpageShow({page:"phone"}),o.$emit("show-logon-page","PhoneCode"),t.abrupt("break",55);case 42:return o.currentTab=z.v.WpsMobileQr,o.curLogonType=z.p.WpsMobileQr,o.loginNewpageClick({page:"scan_code",click:"scancode_tab"}),o.loginNewpageShow({page:"scan_code"}),o.$emit("show-logon-page","QRcode"),t.abrupt("break",55);case 48:return o.currentTab=z.v.WpsAccount,o.curLogonType=z.p.WpsAccount,o.loginNewpageClick({page:"mail",click:"mail_tab"}),o.loginNewpageShow({page:"mail"}),o.$emit("show-logon-page",z.p.WpsAccount),t.abrupt("break",55);case 54:case 55:case"end":return t.stop()}},t,o,[[15,24]])}))()},showAgreementDialog:function(e){var o,t=this,n=(o={},u()(o,z.v.WX,"wechatAuthor"),u()(o,z.v.WpsMobileQr,"wpsAuthor"),u()(o,z.v.PhoneCode,"phoneAuthor"),u()(o,"othersAuthor","othersAuthor"),o);this.isEdition||(n[z.v.WpsAccount]=z.v.WpsAccount),f.a.showAgreementDlg({source:n[e]}).then(function(o){var n=null;try{n="string"==typeof o?JSON.parse(o):o}catch(e){}if(!n)throw new Error("showAgreementDlg is error");if(n.errormsg)throw new Error(n.errormsg);t.bindAgreementCallbackOne(e)}).catch(function(o){h.a.loginLoginpageNewpageAuthfailed({source:n[e],errormsg:o.message})})},bindAgreementCallbackOne:function(e){var o=this;this._curSourceOperation=e,D.b.$off(D.a.AGREEMENT_CALLBACK),D.b.$once(D.a.AGREEMENT_CALLBACK,function(t){if(t)switch(o._curSourceOperation){case z.v.WX:case z.v.WpsMobileQr:case z.v.PhoneCode:e!==o.currentTab&&o.onChooseTab({currentTarget:{dataset:{type:e}}});break;case"othersAuthor":o.goToOtherLogonPage()}})},onCheckboxClick:function(){this._curSourceOperation=null},onProductPictureError:function(e){var o=this.loginConfig,t=o.picture_md5,n=o.content_name,a=this.loginPosition;h.a.accountLoginpagePicfail({position:a,contentname:n,filemd5:t})},wxCodeShowReport:function(e){var o=this;return i()(a.a.mark(function t(){var n,r,i,s;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n={page:"wechat",scan_type:"",qr_from:"",login_position:"",show_from:e},o.prev=1,o.next=4,d.a.getQRConfig();case 4:r=o.sent,i=JSON.parse(r),s=i.result,"[object Object]"===Object.prototype.toString.call(s)&&(n.scan_type=s.config,s.qrcode===z.o.DOCER?n.qr_from="docer":s.qrcode===z.o.VIP?n.qr_from="vip":n.qr_from="public",n.login_position=s.login_position),o.next=16;break;case 9:o.prev=9,o.t0=o.catch(1),console.error(o.t0),n.scan_type="acquirefail",n.qr_from="acquirefail",n.login_position="acquirefail",n.fail_reason=o.t0.toString();case 16:return o.prev=16,h.a.loginCodeShow(n),o.finish(16);case 19:case"end":return o.stop()}},t,o,[[1,9,16,19]])}))()}})},F={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"wps-logon-wxding"},[t("div",{staticClass:"left"},[t("Banner",{attrs:{isEdition:e.isEdition,src:e.loginConfig.bannerUrl},on:{"load-error":e.onProductPictureError}})],1),e._v(" "),t("div",{staticClass:"right"},[t("div",{staticClass:"newlogon-header"},[t("div",{staticClass:"title"},[e._v(e._s(e.loginTitle))])]),e._v(" "),t("div",{staticClass:"body"},[t("div",{staticClass:"wxding-tab"},e._l(e.computedTabs,function(o){return t("div",{key:o.key,staticClass:"tab-box",class:e._f("filterClass")(o.key)},[t("div",{staticClass:"tab",class:{active:e.currentTab===o.key,"tab-wx":o.key===e.TAB.WX,"tab-phone":o.key===e.TAB.PhoneCode,"tab-wpsqr":o.key===e.TAB.WpsMobileQr,"tab-wpsac":o.key===e.TAB.WpsAccount},attrs:{"data-type":o.key},on:{click:e.onChooseTab}},[t("div",[t("Icon",{class:e._f("filterIconClass")(o.key),attrs:{type:e._f("filterIconType")(o.key),active:e.currentTab===o.key}})],1),e._v(" "),t("div",{staticClass:"tab-name"},[e._v(e._s(o.name))])])])}),0),e._v(" "),t("div",{staticClass:"wxding-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentTab===e.TAB.WX,expression:"currentTab === TAB.WX"}],staticClass:"wx-logon"},[e.showLastLogonInfo?t("div",{staticClass:"wx-info"},[t("Avatar",{staticClass:"wx-avatar",attrs:{src:e.lastLogonInfo.lastAvatar,name:e.lastLogonInfo.lastUserName},on:{"clear-account-record":e.onClearWXRecord}}),e._v(" "),t("Button",{staticClass:"wx-login-btn",attrs:{type:"primary"},on:{click:e.onShowWxLogin}},[e._v("微信登录")])],1):t("div",{staticClass:"wx-logon-code"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isWxIframeLoaded,expression:"isWxIframeLoaded"}],staticClass:"wx-logon-iframe-wrapper"},[e.wxLogonFullUrl&&!e.showWeChatButton?[t("iframe",{directives:[{name:"show",rawName:"v-show",value:e.isWxIframeLoaded&&!e.hasNetWorkErrorWX,expression:"isWxIframeLoaded && !hasNetWorkErrorWX"}],staticClass:"wx-logon-iframe",attrs:{frameborder:"0",src:e.wxLogonFullUrl+"&size=180",name:"wxLogon"},on:{load:function(o){return e.handleIframeLoadFailReport("wx")}}}),e._v(" "),t("div",{staticClass:"wx-logon-tip wx-logon-tip-code"},[e._v("\n                  微信扫码即可直接完成注册和登录\n                ")]),e._v(" "),t("Checkbox",{staticClass:"wx-logon-auto wx-logon-auto-code",attrs:{text:"下次自动登录",checked:e.wxAutoLogon},on:{change:e.onChangeLogonAuto,"click-check-data-send":e.clickCheckWeChatDataSend}})]:e._e()],2),e._v(" "),e.showWeChatButton?[t("div",{staticClass:"wx-icon"},[t("ImageButton",{attrs:{type:"wx-large"},on:{click:e.onWechatOfficialLogon}})],1),e._v(" "),t("div",{staticClass:"wx-logon-tip wx-logon-tip-wechatbtn"},[e._v("\n                请点击按钮使用 微信 授权登录\n              ")]),e._v(" "),t("Checkbox",{staticClass:"wx-logon-auto wx-logon-auto-wechatbtn",attrs:{text:"下次自动登录",checked:e.wxAutoLogon},on:{change:e.onChangeLogonAuto,"click-check-data-send":e.clickCheckWeChatDataSend}})]:e._e(),e._v(" "),e.isWxIframeLoaded||e.hasNetWorkErrorWX&&e.netWorkStatusConfig||e.showWeChatButton?e._e():t("Loading"),e._v(" "),e.hasNetWorkErrorWX&&!e.showWeChatButton&&e.netWorkStatusConfig?t("NetworkError",{attrs:{times:e.networkErrorTimes.wx,page:"weixinqrcode"},on:{refresh:function(o){return e.onRefresh(e.TAB.WX)}}}):e._e()],2)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentTab===e.TAB.WpsMobileQr,expression:"currentTab === TAB.WpsMobileQr"}],staticClass:"wpsqr-logon"},[e.isWpsMobileAuthActive?[e.hasNetWorkErrorMobileAuth?t("NetworkError",{staticClass:"network-error",attrs:{times:e.networkErrorTimes.wpsQr,page:"qrcodelogin"},on:{refresh:e.onMobileAuthRefresh}}):t("MobileAuth",{ref:"MobileAuth",attrs:{lastLogonTypeFullInfo:e.lastLogonTypeFullInfo},on:{mobileAppAuthExpired:e.onMobileAppAuthExpired,mobileAppAuthRetryQrcode:e.onMobileAppAuthRetryQrcode,mobileAppAuthClear:e.onMobileAppAuthClear,mobileAuthNetworkError:e.onMobileAuthNetworkError}})]:[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isWpsQrIframeLoaded,expression:"isWpsQrIframeLoaded"}]},[t("iframe",{directives:[{name:"show",rawName:"v-show",value:e.isWpsQrIframeLoaded&&!e.hasNetWorkErrorWpsQr,expression:"isWpsQrIframeLoaded && !hasNetWorkErrorWpsQr"}],staticClass:"wpsqr-logon-iframe",attrs:{frameborder:"0",src:e.wpsMobileQrUrl+"&size=180",name:"wpsQrLogon",width:"100%",height:"315"},on:{load:function(o){return e.handleIframeLoadFailReport("wps")}}})]),e._v(" "),e.isWpsQrIframeLoaded||e.hasNetWorkErrorWpsQr?e._e():t("Loading"),e._v(" "),e.hasNetWorkErrorWpsQr?t("NetworkError",{staticClass:"network-error",attrs:{times:e.networkErrorTimes.wpsQr,page:"qrcodelogin"},on:{refresh:function(o){return e.onRefresh(e.TAB.WpsMobileQr)}}}):e._e()]],2),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentTab===e.TAB.PhoneCode,expression:"currentTab === TAB.PhoneCode"}],staticClass:"phone-logon"},[t("div",{staticClass:"wps-logon-phone-hd"},[t("iframe",{directives:[{name:"show",rawName:"v-show",value:e.isPhoneCodeIframeLoaded&&!e.hasNetWorkErrorPhone,expression:"isPhoneCodeIframeLoaded && !hasNetWorkErrorPhone"}],staticClass:"phone-iframe",attrs:{frameborder:"0",width:"100%",height:"350",name:"PhoneCodeLogon",src:e.phoneCodeLogonUrl},on:{load:function(o){return e.handleIframeLoadFailReport("phonecode")}}}),e._v(" "),e.isPhoneCodeIframeLoaded||e.hasNetWorkErrorPhone?e._e():t("Loading")],1),e._v(" "),e.hasNetWorkErrorPhone?t("NetworkError",{staticClass:"network-error",attrs:{page:"phonecodelogin",times:e.networkErrorTimes.phoneCode},on:{refresh:function(o){return e.onRefresh(e.TAB.PhoneCode)}}}):e._e()],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentTab===e.TAB.WpsAccount,expression:"currentTab === TAB.WpsAccount"}],staticClass:"wpsac-logon"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isAccoungtIframeLoaded,expression:"isAccoungtIframeLoaded"}]},[t("iframe",{directives:[{name:"show",rawName:"v-show",value:e.isAccoungtIframeLoaded&&!e.hasNetWorkErrorWpsAc,expression:"isAccoungtIframeLoaded && !hasNetWorkErrorWpsAc"}],staticClass:"wpsac-logon-iframe",attrs:{frameborder:"0",width:"100%",height:"400",name:"AccountLogon",src:e.accountLogonUrl}})]),e._v(" "),e.isAccoungtIframeLoaded||e.hasNetWorkErrorWpsAc?e._e():t("Loading",{staticClass:"account-loading"}),e._v(" "),e.hasNetWorkErrorWpsAc?t("NetworkError",{staticClass:"network-error",attrs:{times:e.networkErrorTimes.wpsAc,page:"accountlogin"},on:{refresh:function(o){return e.onRefresh("wpsAccount")}}}):e._e()],1),e._v(" "),e.showAgreementMark?t("div",{staticClass:"wps-agreement-mark",on:{click:function(o){return e.showAgreementDialog(e.defaultTab)}}}):e._e()])]),e._v(" "),t("div",{staticClass:"newlogon-footer"},[t("span",{staticClass:"wps-logon-wxding-other",class:e.renderReadonlyClass("login-other"),on:{click:e.goToOtherLogonPage}},[e._v("其他登录方式")]),e._v(" "),e.showReadModeButton?t("span",{staticClass:"wps-logon-wxding-readMode",on:{click:e.handleReadModeButton}},[e._v("暂不登录，仅查看文档")]):e._e(),e._v(" "),t("LogonTip",{directives:[{name:"show",rawName:"v-show",value:e.showLogonTip,expression:"showLogonTip"}],staticClass:"wps-logon-wxding-logontip",class:e.renderReadonlyClass("login-tip"),on:{"click-check-data-send":e.onCheckboxClick},model:{value:e.isAgreementChecked,callback:function(o){e.isAgreementChecked=o},expression:"isAgreementChecked"}})],1)])])},staticRenderFns:[]};var q=t("VU/8")(B,F,!1,function(e){t("lhYX")},null,null);o.default=q.exports},"wre+":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("Dd8w"),a=t.n(n),r=t("NYxO"),i=t("xrTZ"),s=t("u6vw"),c=t("57CN"),l=t("HR9g"),u=t("v8Qz"),g=t("UXP8"),d=t("0EwI"),p=t("ndG0"),h=t("9PiF"),f={name:"WpsAccountLogon",components:{Icon:u.a,Button:g.a,Loading:d.a,NetworkError:p.a,Navbar:h.a},props:{load:{type:Array,default:function(){return[!1]}},currentPage:{type:String,default:""},componentOrigin:{type:String,default:""},lastLogonTypeFullInfo:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{accountLogonUrl:"",isAccoungtIframeLoaded:!1,hasNetWorkError:!1,networkErrorTimes:0,appInfoURI:"",showTitle:!0,isWelcomePage:!1}},computed:a()({},Object(r.d)({loginSource:function(e){return e.loginSource}}),{newTitle:function(){return this.isWelcomePage?l.w.welcome:"2020updated_member"===this.loginSource?l.w.special2020:l.w.default}},Object(r.b)(["ACCOUNT_LOGON_URL"])),watch:{load:function(e){this.isAccoungtIframeLoaded=e[0]},currentPage:{immediate:!0,handler:function(e){"WpsAccount"===e&&this.setLoadingTimeout()}},componentOrigin:{immediate:!0,handler:function(e){this.isWelcomePage=!(!e||"welcome"!==e)}}},created:function(){var e=this;this.isAccoungtIframeLoaded=this.load[0],s.a.getAppInfo().then(function(o){var t=(JSON.parse(o)||{}).result,n=(new Date).getTime(),a=encodeURIComponent(t.version||""),r=encodeURIComponent(t.deviceid||""),s=encodeURIComponent(t.devicename||""),c=encodeURIComponent(t.platform||""),l=encodeURIComponent(e.lastLogonTypeFullInfo.lastAccountName&&i.Base64.decode(e.lastLogonTypeFullInfo.lastAccountName)||"");e.appInfoURI="&appversion="+a+"&deviceid="+r+"&devicename="+s+"&platform="+c;var u=encodeURIComponent(window.location.href.replace(/^file:\/\//,""));e.accountLogonUrl=""+e.ACCOUNT_LOGON_URL+e.appInfoURI+"&_="+n+"&account="+l+"&targetorigin="+u})},mounted:function(){this.initial(),this.setLoadingTimeout()},methods:{loginNewpageClick:function(e){c.a.loginNewpageClick(a()({source:this.isWelcomePage?"welcome":"second_page"},e))},goBack:function(){var e=this.isWelcomePage?l.f.WeChatDing:l.f.Second;this.$emit("change-to-logon-page",e),this.loginNewpageClick({page:"mail",click:this.isWelcomePage?"other_login_type":"return"})},initial:function(){var e=this;s.a.addLogonVerifyListener(function(o){var t=((o||{}).result||{}).url||"",n=encodeURIComponent(window.location.href.replace(/^file:\/\//,""));t&&(e.accountLogonUrl=t+"&targetorigin="+n),e.showTitle=!1})},setLoadingTimeout:function(){var e=this;setTimeout(function(){e.isAccoungtIframeLoaded||(e.hasNetWorkError=!0,e.isAccoungtIframeLoaded=!1,e.networkErrorTimes+=1)},l.x)},onReload:function(){var e=(new Date).getTime(),o=encodeURIComponent(window.location.href.replace(/^file:\/\//,""));this.accountLogonUrl=""+this.ACCOUNT_LOGON_URL+this.appInfoURI+"&_="+e+"&targetorigin="+o,this.hasNetWorkError=!1,this.setLoadingTimeout()}}},m={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"wps-logon-account"},[t("div",{staticClass:"newlogon-header"},[t("div",{staticClass:"title"},[e._v(e._s(e.newTitle))])]),e._v(" "),t("div",{staticClass:"container"},[t("Navbar",{staticClass:"navbar",attrs:{title:""},on:{back:e.goBack}},[t("template",{slot:"back"},[e._v(e._s(e.isWelcomePage?"其他登录方式":"返回"))])],2),e._v(" "),e.isAccoungtIframeLoaded&&e.showTitle?t("div",{staticClass:"wps-logon-title"},[e._v("\n      账号密码登录\n    ")]):e._e(),e._v(" "),t("div",{staticClass:"wps-logon-account-hd"},[t("iframe",{directives:[{name:"show",rawName:"v-show",value:e.isAccoungtIframeLoaded&&!e.hasNetWorkError,expression:"isAccoungtIframeLoaded && !hasNetWorkError"}],staticClass:"account-iframe",attrs:{frameborder:"0",width:"100%",height:"400",name:"AccountLogon",src:e.accountLogonUrl}}),e._v(" "),e.isAccoungtIframeLoaded||e.hasNetWorkError?e._e():t("Loading",{staticClass:"account-loading"})],1),e._v(" "),e.hasNetWorkError?t("NetworkError",{staticClass:"network-error",attrs:{times:e.networkErrorTimes,page:"accountlogin"},on:{refresh:e.onReload}}):e._e()],1)])},staticRenderFns:[]};var w=t("VU/8")(f,m,!1,function(e){t("0w5B")},"data-v-d3d3471c",null);o.default=w.exports},xsxB:function(e,o){},zETU:function(e,o){}});